:: Test-Sex-Encounter [nobr]

<<set _npc = $Yoichi_CB>>

<<if !_npc>>
	ERROR: _npc not set
	<<return>>
<</if>>

<<PronounsSet>>
<<AgeGroupNPC>>
<<make-petname>>
<<create-body _npc>>
<<set $mc.bodyparts = Object.keys($mc.body)>>


/* normalize for sex system */
<<set _npc.bodyparts = Object.keys(_npc.body)>>
<<set _n = _npc>>

<<run setup.normalizeBodyparts($mc)>>
<<run setup.normalizeBodyparts(_n)>>

Name: $mc.name <br>
/*$mc.bodyparts <br>*/
Genitals: $mc.genitals<br>

Name: _n.name  <br>
Has mouth: <<print _n.body.mouth ? "yes" : "no">>  <br>
/*_n.bodyparts <br> */
Genitals: _n.genitals  
<br>
<<if !$sex>>
<<set $sex = {
    position: "Standing",
    role: "top",
    subject: $mc,
    object: _n,
    engagedParts: { subject: [], object: [] },
    penetration: null,
    phase: "tease",
    history: []
}>>
<</if>>

<<if !$room>>
<<set $room = {
    type: "bedroom",
    location: "large floor",
    furnitureFlags: setup.getRoomFurnitureFlags("bedroom")
}>>
<</if>>

<<if !$sex.furnitureFlags>>
<<set $sex.furnitureFlags = $room.furnitureFlags>>
<</if>>

<hr>
<br>
/* <<print JSON.stringify($sex)>> <br>*/
/* <<print setup.getAvailablePositions($sex)>> <br>*/
 /* <<print setup.getAvailableSexActs($sex)>> <br>*/
/* <<print Object.keys(setup.sexacts)>> */
/* <<print JSON.stringify(setup.getAvailablePositions($sex))>> */
/*<b>Last relocation pressed:</b> <<print $debugLastRelocation>>*/

<div id= "sex-container">
<<RoomRelocationUI>>
<<SexEncounterUI>>
</div>

